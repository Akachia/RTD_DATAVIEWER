<?xml version="1.0" encoding="utf-8" ?>
<SearchPortRequestHistory>
    <MainSQL>
		WITH TT_DATA AS (
		SELECT *
		FROM TB_MHS_TRF_REQ_HIST
		WHERE INSDTTM BETWEEN @StartTime AND @EndTime
		+Option01
		+Option02    -- 바인딩 안됨
		+Option03
		ORDER BY INSDTTM DESC
		FETCH FIRST 1000 ROWS ONLY
		)
		SELECT
		CSTID
		, CSTSTAT AS 상태
		, REQ_STAT_CODE
		, EQPTID
		, PORT_ID
		, REQ_TRGT_EQPTID
		, TRGT_EQPT_MOUNT_PSTN_ID AS UWD_ID
		, REQ_TYPE_CODE AS 요청
		, TO_CHAR(INSDTTM, 'YYYY-MM-DD HH24:MI:SS') AS INSDTTM
		, TO_CHAR(UPDDTTM, 'YYYY-MM-DD HH24:MI:SS') AS UPDDTTM
		, PRCS_TYPE_CODE
		, RTD_RULE_ID
		, REQ_SEQS
		, ERR_CODE
		, RTD_EXEC_LOG_CNTT
		, INSUSER
		, REQ_SEQNO
		FROM TT_DATA
		WHERE 1=1
		+Option04
		ORDER BY REQ_SEQNO DESC
	</MainSQL>
    <Option>
        <Option01 type="IF" condition="not_equal" key="CSTID" dataType="string" default="">
            AND CSTID IN (@CSTID)
        </Option01>
        <Option02 type="IF" condition="not_equal" key="PRCS_TYPE_CODE" dataType="string" default="">
            AND PRCS_TYPE_CODE like @PRCS_TYPE_CODE
        </Option02>
        <Option03 type="IF" condition="not_equal" key="PORT_ID" dataType="string" default="">
            AND PORT_ID LIKE @PORT_ID
        </Option03>
        <Option04 type="IF" condition="not_equal" key="CSTSTAT" dataType="" default="">
            AND CSTSTAT = @CSTSTAT
        </Option04>
        <Option05 type="VAR" condition="" key="StartTime" dataType="DateTime" default=""/>
        <Option06 type="VAR" condition="" key="EndTime" dataType="DateTime" default=""/>
    </Option>
    <AdditionalVariable>
    </AdditionalVariable>
    <Coloring>
        <REQ_STAT_CODE Red="255" Green="155" Blue="155" IsColoringColumn="false" IsTimeCompare="false">
            <NO_DATA Red="255" Green="164" Blue="201" IsColoringRow="true"/>
        </REQ_STAT_CODE>
    </Coloring>
    <EventValues/>
</SearchPortRequestHistory>
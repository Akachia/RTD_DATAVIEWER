<?xml version="1.0" encoding="utf-8" ?>
<SearchPortRequestList>
    <MainSQL>
		SELECT
		REQ.REQ_SEQNO as 번호,
		REQ.CSTID AS DURABLE_ID,
		REQ.CSTSTAT as 상태,
		--EA.ELTR_TYPE_CODE AS 극성, 테이블 구조가 상이하여 옵션으로 전극, 조립, 활성화 쿼리를 나눠야 할 필요성이 있음
		REQ.EQPTID AS 설비명,
		REQ.PORT_ID AS 포트명,
		REQ.REQ_TYPE_CODE AS 요청,
		REQ.RTD_RULE_ID,
		REQ.REQ_TRGT_EQPTID AS 최종EQPT,
		REQ.TRGT_EQPT_MOUNT_PSTN_ID AS UWD번호,
		REQ.INSDTTM,
		REQ.UPDDTTM,
		REQ.ERR_CODE,
		C.BUSINESS_USAGE_CODE_DESC,
		REQ.REQ_STAT_CODE,
		REQ.REQ_SEQS,
		REQ.PRCS_TYPE_CODE AS 코드,
		REQ.INSUSER AS 요청자,
		REQ.REQ_SEQNO,
		REQ.RTD_EXEC_LOG_CNTT
		FROM TB_MHS_TRF_REQ REQ
		LEFT JOIN TB_EGN_CODE_ITEM_INFO C ON C.BUSINESS_USAGE_TYPE_CODE = 'TRF_REQ_ERR_CODE' AND C.BUSINESS_USAGE_CODE_ID = REQ.ERR_CODE
		LEFT OUTER JOIN TB_EGN_EQUIP_SPEC_MST EA ON EA.EQUIPMENT_ID = REQ.EQPTID
		WHERE 1 = 1
		AND REQ.INSDTTM BETWEEN TO_DATE(@StartTime, 'YYYY-MM-DD') AND TO_DATE(@EndTime, 'YYYY-MM-DD HH24:MI:SS')
		+Option1
		+Option2 -- 바인딩 안됨
		+Option3
		+Option4
		+Option5
		ORDER BY REQ.CSTID, REQ.UPDDTTM DESC
	</MainSQL>
    <Option>
        <Option1 type="IF" condition="not_equal" key="DURABLE_ID" dataType="string" default="">
            AND (REQ.CSTID IN @DURABLE_ID OR REQ.CSTID IN @DURABLE_ID)
        </Option1>
        <Option2 type="IF" condition="not_equal" key="PORT_ID" dataType="string" default="">
            AND REQ.PORT_ID LIKE @PORT_ID 
        </Option2>
        <Option3 type="IF" condition="not_equal" key="RTD_RULE_ID" dataType="string" default="">
            AND REQ.RTD_RULE_ID LIKE @RTD_RULE_ID
        </Option3>
        <Option4 type="IF" condition="not_equal" key="REQ_STAT_CODE" dataType="string" default="">
            AND REQ.REQ_STAT_CODE like @REQ_STAT_CODE
        </Option4>
        <Option5 type="IF" condition="not_equal" key="DURABLE_STATUS_CODE" dataType="string" default="">
            AND REQ.CSTSTAT = @DURABLE_STATUS_CODE
        </Option5>
        <Option6 type="VAR" condition="" key="StartTime" dataType="DateTime" default=""/>
        <Option7 type="VAR" condition="" key="EndTime" dataType="DateTime" default=""/>
    </Option>
    <AdditionalVariable>
    </AdditionalVariable>
    <Coloring>
        <REQ_STAT_CODE Red="255" Green="155" Blue="155" IsColoringColumn="false" IsTimeCompare="false">
            <REQUEST Red="255" Green="212" Blue="212" IsColoringRow="true"/>
            <REQUEST_WRTD Red="255" Green="212" Blue="212" IsColoringRow="true"/>
            <QUERY Red="255" Green="212" Blue="212" IsColoringRow="true"/>
        </REQ_STAT_CODE>
        <상태 Red="255" Green="155" Blue="155" IsColoringColumn="false" IsTimeCompare="false">
            <U Red="164" Green="201" Blue="255" IsColoringRow="false"/>
            <E Red="228" Green="239" Blue="255" IsColoringRow="false"/>
        </상태>
    </Coloring>
    <EventValues>
		<DURABLE_ID TYPE='string' CallSQL = 'SearchCarrierInfomation' EventType='Click'/>
        <REQ_SEQNO TYPE='Bigint' CallSQL = 'SearchTransportJobInfomation' EventType='Click'/>
        <RTD_EXEC_LOG_CNTT TYPE='string' CallSQL = '' EventType='Click'/>
    </EventValues>
</SearchPortRequestList>
<?xml version="1.0" encoding="utf-8" ?>
<SearchEquipmentList>
    <MainSQL>
	    SELECT DISTINCT
	    e.EQUIPMENT_ID AS EQPTID
	    FROM
	    TB_EGN_EQUIP_SPEC_MST e
	    INNER JOIN TB_EGN_FCTRY_AREA_MST TEFAM ON e.FACTORY_AREA_ID = TEFAM.FACTORY_AREA_ID
	    INNER JOIN TB_EGN_EQUIP_INFO ei ON e.EQUIPMENT_ID = ei.EQUIPMENT_ID
	    INNER JOIN TB_MMD_TRF_PORT TMTP ON TMTP.EQPTID = e.EQUIPMENT_ID
	    WHERE 1 = 1
	    AND e.USE_FLAG = 'Y'
	    AND e.EQUIPMENT_GROUP_ID IN (@EQP_GROUP_ID_LIST)  -- Option1
	    AND TEFAM.FACILITY_CODE = @AREA_ID  -- Option2
	    AND e.EQUIPMENT_GROUP_ID IN ('CNV','STO','EOL','FOR','LAM','NND','STK')
	    AND e.EQUIPMENT_ID = SUBSTR(TMTP.PORT_ID, 1, 11)
	    UNION
	    SELECT DISTINCT
	    e.EQUIPMENT_ID AS EQPTID
	    FROM
	    TB_EGN_EQUIP_SPEC_MST e
	    INNER JOIN TB_EGN_FCTRY_AREA_MST TEFAM ON e.FACTORY_AREA_ID = TEFAM.FACTORY_AREA_ID
	    INNER JOIN TB_EGN_EQUIP_INFO ei ON e.EQUIPMENT_ID = ei.EQUIPMENT_ID
	    INNER JOIN TB_MMD_TRF_PORT TMTP ON TMTP.EQPTID = e.EQUIPMENT_ID
	    WHERE 1 = 1
	    AND e.USE_FLAG = 'Y'
	    AND e.EQUIPMENT_GROUP_ID IN (@EQP_GROUP_ID_LIST)
	    AND TEFAM.FACILITY_CODE = @AREA_ID
	    AND e.EQUIPMENT_GROUP_ID IN ('SEL','HPC','DEG','JGF','DIS','OCV','ROL','COT')
	    AND e.EQUIPMENT_ID = SUBSTR(TMTP.PORT_ID, 1, 9)
	    UNION
	    SELECT DISTINCT
	    e.EQUIPMENT_ID AS EQPTID
	    FROM
	    TB_EGN_EQUIP_SPEC_MST e
	    INNER JOIN TB_EGN_FCTRY_AREA_MST TEFAM ON e.FACTORY_AREA_ID = TEFAM.FACTORY_AREA_ID
	    INNER JOIN TB_EGN_EQUIP_INFO ei ON e.EQUIPMENT_ID = ei.EQUIPMENT_ID
	    INNER JOIN TB_MMD_TRF_PORT TMTP ON TMTP.EQPTID = e.EQUIPMENT_ID
	    WHERE 1 = 1
	    AND e.USE_FLAG = 'Y'
	    AND e.EQUIPMENT_GROUP_ID IN (@EQP_GROUP_ID_LIST)
	    AND e.EQUIPMENT_GROUP_ID IN ('PKG')
	    AND e.EQUIPMENT_ID = SUBSTR(TMTP.PORT_ID, 1, 11)
	    ORDER BY EQPTID  -- TODO order by절이 제대로 돌아가는지 확인필요
	</MainSQL>
	<Option>
		<Option1 type="VAR" condition="" key="EQP_GROUP_ID_LIST" dataType="string" default=""/>
        <Option2 type="VAR" condition="" key="AREA_ID" dataType="string" default=""/>
        <Option3 type="VAR" condition="" key="SYSTEM_TYPE_CODE" dataType="string" default=""/>
    </Option>
    <AdditionalVariable/>
    <Coloring/>
    <EventValues/>
    <ColumnCount/>
</SearchEquipmentList>
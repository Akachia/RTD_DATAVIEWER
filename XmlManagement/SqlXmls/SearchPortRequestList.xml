<?xml version="1.0" encoding="utf-8" ?>
<SearchPortRequestList>
	<MainSQL>
			SELECT
			REQ.REQ_SEQNO as 번호
			, REQ.CSTID AS CSTID
			, REQ.CSTSTAT as 상태
			, EA.s02 AS 극성
			, REQ.EQPTID AS 설비명
			, REQ.PORT_ID AS 포트명
			, REQ.REQ_TYPE_CODE AS 요청코드
			, REQ.PRCS_TYPE_CODE AS 코드
			, REQ.RTD_RULE_ID
			, REQ.INSUSER AS 요청자
			, CONVERT(CHAR(23), REQ.INSDTTM, 20) AS INSDTTM
			, CONVERT(CHAR(23), REQ.UPDDTTM, 20) AS UPDDTTM
			, REQ.REQ_STAT_CODE
			, REQ.REQ_SEQS
			, REQ.RTD_EXEC_LOG_CNTT
			, REQ.ERR_CODE
			, REQ.REQ_SEQNO
			, C.CMCDNAME AS ERR_DESC
			FROM TB_MHS_TRF_REQ REQ with(nolock)
			LEFT JOIN COMMONCODE     C with(nolock) ON C.CMCDTYPE = 'TRF_REQ_ERR_CODE' AND C.CMCODE = REQ.ERR_CODE
			LEFT OUTER JOIN EquipmentAttr  EA With (NOLOCK) ON EA.EQPTID = REQ.EQPTID
			WHERE 1 = 1
			AND CONVERT(CHAR(10), REQ.INSDTTM, 20) BETWEEN @StartTime AND @EndTime
			+Option1
			+Option2
			+Option3
			+Option4
			+Option5
			ORDER BY REQ.CSTID, REQ.UPDDTTM DESC
		</MainSQL>
	<Option>
		<Option1 type="IF" condition="not_equal" key="CSTID" dataType="string" default="">
				AND REQ.CSTID IN (@CSTID) 
			</Option1>
		<Option2 type="IF" condition="not_equal" key="PORTID" dataType="string" default="">
				AND REQ.PORT_ID LIKE @PORTID
			</Option2>
		<Option3 type="IF" condition="not_equal" key="RULEID" dataType="string" default="">
			   AND REQ.RTD_RULE_ID LIKE @RULEID
			</Option3>
		<Option4 type="IF" condition="not_equal" key="REQ_STAT_CODE" dataType="string" default="">
				AND REQ.REQ_STAT_CODE like @REQ_STAT_CODE
			</Option4>
		<Option5 type="IF" condition="not_equal" key="CSTSTAT" dataType="string" default="">
				AND H.CSTSTAT = @CSTSTAT
			</Option5>
		<Option6 type="VAR" condition="" key="StartTime" dataType="DateTime" default=""/>
		<Option7 type="VAR" condition="" key="EndTime" dataType="DateTime" default=""/>
	</Option>
	<AdditionalVariable>
		</AdditionalVariable>
	<Coloring>
		<REQ_STAT_CODE Red="255" Green="155" Blue="155" IsColoringColumn="false" IsTimeCompare="false">
			<REQUEST Red="255" Green="212" Blue="212" IsColoringRow="true"/>
			<QUERY Red="255" Green="212" Blue="212" IsColoringRow="true"/>
		</REQ_STAT_CODE>
		<상태 Red="255" Green="155" Blue="155" IsColoringColumn="false" IsTimeCompare="false">
			<U Red="164" Green="201" Blue="255" IsColoringRow="false"/>
			<E Red="228" Green="239" Blue="255" IsColoringRow="false"/>
		</상태>
	</Coloring>
	<EventValues>
		<CSTID TYPE='string' CallSQL='SearchCstInfo' EventType='Click'/>
		<REQ_SEQNO TYPE='Bigint' CallSQL='SearchTrfInfo' EventType='Click'/>
		<RTD_EXEC_LOG_CNTT TYPE='string' CallSQL='' EventType='Click'/>
	</EventValues>
</SearchPortRequestList>
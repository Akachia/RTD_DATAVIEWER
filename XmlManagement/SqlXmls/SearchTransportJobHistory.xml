<?xml version="1.0" encoding="utf-8" ?>
<SearchTransportJobHistory>
	<MainSQL>
		SELECT
		CSTID
		, LOTID
		, FROM_EQPTID
		, FROM_PORT_iD
		, TO_EQPTID
		, TO_PORT_ID
		, CSTSTAT
		, RTD_RULE_ID
		, CMD_STAT_CODE
		, INSUSER
		, CONVERT(CHAR(23), INSDTTM, 20) AS INSDTTM
		, CONVERT(CHAR(23), UPDDTTM, 20) AS UPDDTTM
		, (CASE WHEN (DATEDIFF(minute, INSDTTM, GETDATE())>=60) THEN '1' ELSE 'O' END)  AS CMDCHK
		FROM TB_MHS_TRF_CMD_HIST with(nolock)
		WHERE INSDTTM BETWEEN @StartTime AND @EndTime
		+Option1
		+Option2
		+Option3
		+Option4
		+Option5
		+Option6
		order by INSDTTM desc
	</MainSQL>
	<Option>
		<Option1 type="IF" condition="not_equal" key="CSTID" dataType="" default="">
				AND CSTID IN (@CSTID)
			</Option1>
		<Option2 type="IF" condition="not_equal" key="ReqEQP" dataType="" default="">
				AND FROM_PORT_ID LIKE @ReqEQP
			</Option2>
		<Option3 type="IF" condition="not_equal" key="ToEQP" dataType="" default="">
				AND TO_PORT_ID LIKE @ToEQP
			</Option3>
		<Option4 type="CSTSTAT" condition="CSTSTAT" key="CSTSTAT" dataType="" default="0">
				AND CSTSTAT = @CSTSTAT
			</Option4>
		<Option5 type="MOVINGSTATE" condition="MOVINGSTATE" key="MOVINGSTATE" dataType="" default="0">
			  AND CMD_STAT_CODE = @MOVINGSTATE
			</Option5>
		<Option6 type="IF" condition="not_equal" key="RuleId" dataType="" default="">
				AND RTD_RULE_ID = @RuleId
			</Option6>
	</Option>
	<AdditionalVariable>
		<StartTime dataType="DateTime" default=""/>
		<EndTime dataType="DateTime" default=""/>
	</AdditionalVariable>
	<Coloring>
		<CSTSTAT Red="255" Green="155" Blue="155" IsColoringColumn="false" IsTimeCompare="false">
			<U Red="164" Green="201" Blue="255" IsColoringRow="false"/>
			<E Red="228" Green="239" Blue="255" IsColoringRow="false"/>
		</CSTSTAT>
	</Coloring>
	<EventValues/>
</SearchTransportJobHistory>

<?xml version="1.0" encoding="utf-8" ?>
<SearchPortRequestHistory>
    <MainSQL>
        WITH TT_DATA AS (
        SELECT top 1000 *
        FROM TB_MHS_TRF_REQ_HIST with(nolock)
        WHERE INSDTTM BETWEEN @StartTime AND @EndTime
        +Option01 --AND CSTID LIKE @CSTID
        +Option02 --AND PRCS_TYPE_CODE like @PRCS_TYPE_CODE
        +Option03
        ORDER BY INSDTTM  DESC
        )
        SELECT
        CSTID
        , CSTSTAT AS 상태
        , REQ_STAT_CODE
        , EQPTID
        , PORT_ID
        , REQ_TRGT_EQPTID
        , TRGT_EQPT_MOUNT_PSTN_ID AS UWD_ID
        , REQ_TYPE_CODE AS 요청
        , CONVERT(CHAR(23), INSDTTM, 20) AS INSDTTM
        , CONVERT(CHAR(23), UPDDTTM, 20) AS UPDDTTM
        , PRCS_TYPE_CODE
        , RTD_RULE_ID
        , REQ_SEQS
        , ERR_CODE
        , RTD_EXEC_LOG_CNTT
        , INSUSER
        , REQ_SEQNO
        FROM TT_Data with(nolock)
        WHERE 1=1
        +Option04
        ORDER BY REQ_SEQNO DESC
    </MainSQL>
    <Option>
        <Option01 type="IF" condition="not_equal" key="CSTID" dataType="string" default="">
            AND CSTID IN (@CSTID)
        </Option01>
        <Option02 type="IF" condition="not_equal" key="PRCS_TYPE_CODE" dataType="string" default="">
            AND PRCS_TYPE_CODE like @PRCS_TYPE_CODE
        </Option02>
        <Option03 type="IF" condition="not_equal" key="ReqPortId" dataType="string" default="">
            AND PORT_ID LIKE @ReqPortId
        </Option03>
        <Option04 type="IF" condition="not_equal" key="CSTSTAT" dataType="" default="">
            AND CSTSTAT = @CSTSTAT
        </Option04>
        <Option05 type="VAR" condition="" key="StartTime" dataType="DateTime" default=""/>
        <Option06 type="VAR" condition="" key="EndTime" dataType="DateTime" default=""/>
    </Option>
    <AdditionalVariable>
    </AdditionalVariable>
    <Coloring>
        <REQ_STAT_CODE Red="255" Green="155" Blue="155" IsColoringColumn="false" IsTimeCompare="false">
            <NO_DATA Red="255" Green="164" Blue="201" IsColoringRow="true"/>
        </REQ_STAT_CODE>
    </Coloring>
    <EventValues/>
</SearchPortRequestHistory>
<?xml version="1.0" encoding="utf-8" ?>
<SearchPortRequestList>
    <MainSQL>
        SELECT
        REQ.REQ_SEQNO as 번호
        , REQ.CSTID AS CSTID
        , REQ.CSTSTAT as 상태
        , EA.S02 AS 극성
        , REQ.EQPTID AS 설비명
        , REQ.PORT_ID AS 포트명
        , REQ.REQ_TYPE_CODE AS 요청
        , REQ.RTD_RULE_ID
        , REQ.REQ_TRGT_EQPTID AS 최종EQPT
        , REQ.TRGT_EQPT_MOUNT_PSTN_ID AS UWD번호
        , CONVERT(CHAR(23), REQ.INSDTTM, 20) AS INSDTTM
        , CONVERT(CHAR(23), REQ.UPDDTTM, 20) AS UPDDTTM
        , REQ.ERR_CODE
        , C.CMCDNAME AS ERR_DESC
        , REQ.REQ_STAT_CODE
        , REQ.REQ_SEQS
        , REQ.PRCS_TYPE_CODE AS 코드
        , REQ.INSUSER AS 요청자
        , REQ.REQ_SEQNO
        , REQ.RTD_EXEC_LOG_CNTT
        FROM TB_MHS_TRF_REQ REQ with(nolock)
        LEFT JOIN COMMONCODE     C with(nolock) ON C.CMCDTYPE = 'TRF_REQ_ERR_CODE' AND C.CMCODE = REQ.ERR_CODE
        LEFT OUTER JOIN EquipmentAttr  EA With (NOLOCK) ON EA.EQPTID = REQ.EQPTID
        WHERE 1 = 1
        AND CONVERT(CHAR(10), REQ.INSDTTM, 20) BETWEEN @StartTime AND @EndTime
        +Option1
        +Option2
        +Option3
        +Option4
        +Option5
        ORDER BY REQ.CSTID, REQ.UPDDTTM DESC
    </MainSQL>
    <Option>
        <Option1 type="IF" condition="not_equal" key="CSTID" dataType="string" default="">
            AND (REQ.CSTID IN (@CSTID) OR REQ.CSTID IN (@CSTID))
        </Option1>
        <Option2 type="IF" condition="not_equal" key="PORTID" dataType="string" default="">
            AND REQ.PORT_ID LIKE @PORTID
        </Option2>
        <Option3 type="IF" condition="not_equal" key="RULEID" dataType="string" default="">
            AND REQ.RTD_RULE_ID LIKE @RULEID
        </Option3>
        <Option4 type="IF" condition="not_equal" key="REQ_STAT_CODE" dataType="string" default="">
            AND REQ.REQ_STAT_CODE like @REQ_STAT_CODE
        </Option4>
        <Option5 type="IF" condition="not_equal" key="CSTSTAT" dataType="string" default="">
            AND REQ.CSTSTAT = @CSTSTAT
        </Option5>
        <Option6 type="VAR" condition="" key="StartTime" dataType="DateTime" default=""/>
        <Option7 type="VAR" condition="" key="EndTime" dataType="DateTime" default=""/>
    </Option>
    <AdditionalVariable>
    </AdditionalVariable>
    <Coloring>
        <REQ_STAT_CODE Red="255" Green="155" Blue="155" IsColoringColumn="false" IsTimeCompare="false">
            <REQUEST Red="255" Green="212" Blue="212" IsColoringRow="true"/>
            <REQUEST_WRTD Red="255" Green="212" Blue="212" IsColoringRow="true"/>
            <QUERY Red="255" Green="212" Blue="212" IsColoringRow="true"/>
        </REQ_STAT_CODE>
        <상태 Red="255" Green="155" Blue="155" IsColoringColumn="false" IsTimeCompare="false">
            <U Red="164" Green="201" Blue="255" IsColoringRow="false"/>
            <E Red="228" Green="239" Blue="255" IsColoringRow="false"/>
        </상태>
    </Coloring>
    <EventValues>
        <CSTID TYPE='string' CallSQL = 'SearchCarrierInfomation' EventType='Click'/>
        <REQ_SEQNO TYPE='Bigint' CallSQL = 'SearchTransportJobInfomation' EventType='Click'/>
        <RTD_EXEC_LOG_CNTT TYPE='string' CallSQL = '' EventType='Click'/>
    </EventValues>
</SearchPortRequestList>